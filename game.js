!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports={FONT_FAMILY:"Press Start 2P",FONT_SIZE:22,BLOCK_SIZE:32,BOARD_HEIGHT:20,BOARD_WIDTH:10,SCORE_HEIGHT:2,SCORE_WIDTH:6,LEVEL_HEIGHT:2,LEVEL_WIDTH:6,LINES_HEIGHT:1,LINES_WIDTH:10,NEXT_HEIGHT:5,NEXT_WIDTH:6}},function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(0).BLOCK_SIZE,a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;n(this,e),this.el=this.draw(t,r)}var t,r,a;return t=e,(r=[{key:"draw",value:function(e,t){var r=new PIXI.Sprite(e);return r.position.x=0,r.position.y=0,r.width=t,r.height=t,r}}])&&o(t.prototype,r),a&&o(t,a),e}();e.exports=a},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(0).BOARD_WIDTH,i=r(10),a=r(11).randomBetween,s=function(){function e(t){var r=t.row,n=t.col,i=t.type,a=t.rotation;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currRotation=void 0!==a?a:0,this.realRotation=this.currRotation,this.type=i||this.getRandomType(),this.shape=this.type.shapes[this.currRotation],this.row=void 0!==r?r:0,this.col=void 0!==n?n:Math.ceil((o-1)/2-this.type.size/2)}var t,r,s;return t=e,(r=[{key:"getRandomType",value:function(){var e=a(1,Object.keys(i).length)-1;return i[Object.keys(i)[e]]}},{key:"move",value:function(e){this.col=this.col+e}},{key:"fall",value:function(){this.row++}},{key:"nextRotation",value:function(e){return Math.abs(this.realRotation+e)%4}},{key:"rotate",value:function(e){this.realRotation=this.realRotation+e;var t=Math.abs(this.realRotation)%4;this.currRotation=t,this.shape=this.type.shapes[this.currRotation]}}])&&n(t.prototype,r),s&&n(t,s),e}();e.exports=s},function(e,t,r){r(4);var n=r(5);window.onload=function(){var e=new PIXI.Application({width:864,height:864,backgroundColor:0,resolution:1});e.loader.add("background","images/screen/background.png"),e.loader.add("board-border","images/screen/board-border.png"),e.loader.add("board-corner","images/screen/board-corner.png"),e.loader.add("score-border","images/screen/score-border.png"),e.loader.add("score-corner","images/screen/score-corner.png"),e.loader.add("block-empty","images/empty.png"),e.loader.add("block-i","images/I.png"),e.loader.add("block-j","images/J.png"),e.loader.add("block-l","images/L.png"),e.loader.add("block-o","images/O.png"),e.loader.add("block-s","images/S.png"),e.loader.add("block-t","images/T.png"),e.loader.add("block-z","images/Z.png"),document.getElementById("game").appendChild(e.view),e.loader.onComplete.add((function(){new n(e).run()})),e.loader.load()}},function(e,t,r){},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(6),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.gameStates={},this.state=null}var t,r,i;return t=e,(r=[{key:"run",value:function(){this.addState("play",new o(this.app)),this.setState("play"),this.app.ticker.add(this.update,this)}},{key:"addState",value:function(e,t){this.gameStates[e]=t,this.app.stage.addChild(t)}},{key:"update",value:function(){this.state&&this.state.update()}},{key:"setState",value:function(e,t){var r=this.state;this.state=null,r&&(t.keepVisible||(r.visible=!1),r.exit(t));var n=this.gameStates[e];n.enter(t),n.visible=!0,this.state=n}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=i},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r(0),u=l.BLOCK_SIZE,f=l.LINES_HEIGHT,h=l.SCORE_HEIGHT,p=r(7),d=r(8),y=r(9),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(b,e);var t,r,n,l,p=(t=b,function(){var e,r=c(t);if(s()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function b(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=p.call(this)).engine=new y({resources:e.loader.resources}),t.startDate=null;var r=new PIXI.TilingSprite(e.loader.resources.background.texture,e.renderer.width,e.renderer.height);return t.addChild(r),t.addChild(t.engine.lines),t.addChild(t.engine.board),t.addChild(t.engine.score),t.addChild(t.engine.next),t.addChild(t.engine.level),t.engine.lines.position.x=4*u,t.engine.lines.position.y=u,t.engine.board.position.x=4*u,t.engine.board.position.y=t.engine.lines.position.y+u*f+2*u,t.engine.score.position.x=16*u,t.engine.score.position.y=u,t.engine.next.position.x=16*u,t.engine.next.position.y=t.engine.score.position.y+u*h+2*u,t.engine.level.position.x=16*u,t.engine.level.position.y=t.engine.score.position.y+t.engine.next.position.y+u*h+4*u,t}return r=b,(n=[{key:"enter",value:function(){this.startDate=new Date}},{key:"update",value:function(){if(!this.engine.gameOver){var e=new Date,t=d.getKeyPress();t===d.KEYS.KEY_UP&&this.engine.rotate(-1),t===d.KEYS.KEY_DOWN&&this.engine.rotate(1),t===d.KEYS.KEY_LEFT&&this.engine.move(-1),t===d.KEYS.KEY_RIGHT&&this.engine.move(1),e-this.startDate>=this.engine.hardFallDelaySpeed&&t===d.KEYS.KEY_SPACE?(this.startDate=new Date,this.engine.fall()&&d.unblockSpace()):e-this.startDate>=this.engine.gameSpeed&&(this.startDate=new Date,this.engine.fall())}this.engine.update()}}])&&o(r.prototype,n),l&&o(r,l),b}(p);e.exports=b},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,PIXI.Container);var t,r,c,l,u=(t=f,function(){var e,r=s(t);if(a()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return i(this,e)});function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=u.call(this)).visible=!1,e}return r=f,(c=[{key:"enter",value:function(e){}},{key:"exit",value:function(e){}}])&&n(r.prototype,c),l&&n(r,l),f}();e.exports=c},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n={KEY_DOWN:40,KEY_UP:38,KEY_LEFT:37,KEY_RIGHT:39,KEY_SPACE:32},o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=null,this.blockSpace=!1,this.addEvents()}var t,o,i;return t=e,(o=[{key:"addEvents",value:function(){var e=this;return window.addEventListener("keydown",(function(t){null===e.key&&(t.keyCode!==n.KEY_SPACE?e.key=t.keyCode:e.blockSpace||(e.key=t.keyCode))})),window.addEventListener("keyup",(function(t){e.key=null,t.keyCode===n.KEY_SPACE&&(e.blockSpace=!1)})),this}},{key:"getKeyPress",value:function(){var e=this.key;return e!==n.KEY_SPACE&&(this.key=null),e}},{key:"unblockSpace",value:function(){this.key=null,this.blockSpace=!0}}])&&r(t.prototype,o),i&&r(t,i),e}();e.exports=new o,e.exports.KEYS=n},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(0),i=o.BOARD_HEIGHT,a=o.BOARD_WIDTH,s=r(2),c=r(12),l=r(13),u=r(14),f=r(15),h=r(16),p=function(){function e(t){var r=t.board,n=t.resources;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.board=r||new c({resources:n}),this.score=new l({resources:n}),this.next=new u({resources:n}),this.level=new f({resources:n}),this.lines=new h({resources:n}),this.gameOver=!1,this.gameOverStartDate=new Date,this.gameOverDelaySpeed=50,this.gameOverAnimationActive=!0,this.gameSpeed=1e3,this.hardFallDelaySpeed=50,this.MOVEMENT_TYPES={ROTATE:"ROTATE",RIGHT:"RIGHT",LEFT:"LEFT",DOWN:"DOWN"},this.currTetromino=new s({}),this.tetrominos=[];for(var o=0;o<5;o++)this.tetrominos.push(new s({}));this.board.spawn(this.currTetromino),this.next.addTetromino(this.tetrominos[0])}var t,r,o;return t=e,(r=[{key:"canMove",value:function(e,t){var r=e.shape,n=e.row,o=e.row+(r.length-1),s=e.col,c=e.col+(r.length-1);t===this.MOVEMENT_TYPES.DOWN&&(n+=1,o+=1),t===this.MOVEMENT_TYPES.LEFT&&(s-=1,c-=1),t===this.MOVEMENT_TYPES.RIGHT&&(s+=1,c+=1),t===this.MOVEMENT_TYPES.ROTATE&&(r=e.type.shapes[e.nextRotation(1)]);for(var l=!0,u=0,f=n;f<=o;f++){for(var h=0,p=s;p<=c;p++){if(f<=i-1)if(p>=0&&p<=a-1){if(this.board.grid[f][p]&&r[u][h]){l=!1;break}}else r[u][h]&&(l=!1);else r[u][h]&&(l=!1);h++}if(!l)break;u++}return l}},{key:"fall",value:function(){var e=!1;return this.currTetromino&&this.canMove(this.currTetromino,"DOWN")?this.currTetromino.fall():(this.fusion(),e=!0),e}},{key:"move",value:function(e){this.currTetromino&&(-1===e?this.canMove(this.currTetromino,"LEFT")&&this.currTetromino.move(e):this.canMove(this.currTetromino,"RIGHT")&&this.currTetromino.move(e))}},{key:"rotate",value:function(e){this.canMove(this.currTetromino,"ROTATE")&&this.currTetromino.rotate(e)}},{key:"fusion",value:function(){this.board.merge(this.currTetromino);var e=this.tetrominos.splice(0,1);this.tetrominos.push(new s({})),this.currTetromino=e[0];var t=this.checkForLines();this.score.calculate(this.level.number,t),this.lines.increase(t),0!==t&&this.lines.number%10==0&&(this.level.increase(),this.gameSpeed=this.gameSpeed-50),this.board.spawn(this.currTetromino),this.next.addTetromino(this.tetrominos[0]),this.canMove(this.currTetromino)||(this.gameOver=!0,console.log("GAME OVER"))}},{key:"checkForLines",value:function(){for(var e=[],t=0;t<this.board.grid.length;t++){for(var r=!0,n=0;n<this.board.grid[t].length;n++)this.board.grid[t][n]||(r=!1);r&&e.push(t)}for(var o=this.board.grid.slice(),i=0;i<e.length;i++)o.splice(e[i]-i,1);for(var s=0;s<e.length;s++)o.unshift(new Array(a).fill(0));return this.board.grid=o,e.length}},{key:"update",value:function(){if(this.gameOver){if(this.gameOverAnimationActive&&new Date-this.gameOverStartDate>=this.gameOverDelaySpeed){var e=this.board.completeEmptyRowWithRandomBlocks();this.gameOverStartDate=new Date,0===e&&(this.gameOverAnimationActive=!1)}}else this.board.update(this.currTetromino)}}])&&n(t.prototype,r),o&&n(t,o),e}();e.exports=p},function(e,t){e.exports={I:{name:"I",texture:"block-i",size:4,shapes:[[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]]},J:{name:"J",texture:"block-j",size:3,shapes:[[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]]},L:{name:"L",texture:"block-l",size:3,shapes:[[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]]},O:{name:"O",texture:"block-o",size:2,shapes:[[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]]]},S:{name:"S",texture:"block-s",size:3,shapes:[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]]},T:{name:"T",texture:"block-t",size:3,shapes:[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]]},Z:{name:"Z",texture:"block-z",size:3,shapes:[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]],[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]]}}},function(e,t){e.exports={randomBetween:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r(0),u=l.BLOCK_SIZE,f=l.BOARD_WIDTH,h=l.BOARD_HEIGHT,p=r(2),d=r(1),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(b,PIXI.Container);var t,r,n,l,y=(t=b,function(){var e,r=c(t);if(s()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function b(e){var t,r=e.resources;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=y.call(this)).res=r,t.grid=t.createEmptyBoard(),t.visibleGrid=t.createEmptyBoard(),t.createGraphicalContainer(),t.board=new PIXI.Container,t.board.position.x=32,t.board.position.y=32,t.init(),t}return r=b,(n=[{key:"createGraphicalContainer",value:function(){for(var e=h+1,t=f+1,r=0;r<=e;r++)for(var n=0;n<=t;n++)if(0===r||r===e||0===n||n===t){var o=new d(this.res["board-border"].texture,u);0===r&&0===n?o.el.texture=this.res["board-corner"].texture:0===r&&n===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1):r===e&&0===n?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.y=1,o.el.scale.y*=-1):r===e&&n===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1,o.el.anchor.y=1,o.el.scale.y*=-1):r===e?(o.el.anchor.y=1,o.el.scale.y*=-1):0===n?(o.el.angle=-90,o.el.pivot.set(u,0)):n===t&&(o.el.angle=90,o.el.pivot.set(0,u)),o.el.position.x=n*u,o.el.position.y=r*u,this.addChild(o.el)}}},{key:"createEmptyBoard",value:function(){return new Array(h).fill(0).map((function(){return new Array(f).fill(0)}))}},{key:"init",value:function(){for(var e=0;e<this.grid.length;e++)for(var t=0;t<this.grid[e].length;t++){var r=new d(this.res["block-empty"].texture,u);r.el.position.x=t*u,r.el.position.y=e*u,this.visibleGrid[e][t]=r.el,this.board.addChild(r.el)}this.addChild(this.board)}},{key:"spawn",value:function(e){this.update(e)}},{key:"merge",value:function(e){this.grid=this.getGridWithTetromino(e)}},{key:"update",value:function(e){this.draw(this.getGridWithTetromino(e))}},{key:"getGridWithTetromino",value:function(e){for(var t=this.createEmptyBoard(),r=0,n=0;n<this.grid.length;n++){for(var o=e.col<0?Math.abs(e.col):0,i=!1,a=0;a<this.grid[n].length;a++)n>=e.row&&n<e.row+e.type.size&&a>=e.col&&a<e.col+e.type.size?(e.type.shapes[e.currRotation][r][o]?t[n][a]=e.type.texture:t[n][a]=this.grid[n][a],i=!0):t[n][a]=this.grid[n][a],i&&o++;i&&r++}return t}},{key:"draw",value:function(e){for(var t=0;t<this.grid.length;t++)for(var r=0;r<this.grid[t].length;r++)0!==e[t][r]?this.visibleGrid[t][r].texture=this.res[e[t][r]].texture:this.visibleGrid[t][r].texture=this.grid[t][r]?this.visibleGrid[t][r].texture:this.res["block-empty"].texture}},{key:"completeEmptyRowWithRandomBlocks",value:function(){for(var e=this.grid.length-1,t=e;t>=0;t--){for(var r=!0,n=0;n<this.grid[t].length;n++)0===this.grid[t][n]&&(r=!1);if(!r){for(var o=0;o<this.grid[t].length;o++){var i=new p({});this.visibleGrid[t][o].texture=this.res[i.type.texture].texture,this.grid[t][o]=i.type.texture,e=t}break}}return e}}])&&o(r.prototype,n),l&&o(r,l),b}();e.exports=y},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r(0),u=l.BLOCK_SIZE,f=l.SCORE_WIDTH,h=l.SCORE_HEIGHT,p=l.FONT_SIZE,d=l.FONT_FAMILY,y=r(1),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(v,PIXI.Container);var t,r,n,l,b=(t=v,function(){var e,r=c(t);if(s()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function v(e){var t,r=e.resources;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=b.call(this)).res=r,t.title="SCORE",t.score=0,t.maxScore=999999999,t.padding=5,t.points={1:40,2:100,3:300,4:1200},t.scoreEl=null,t.createGraphicalContainer(),t.addTitle(),t.addScore(),t}return r=v,(n=[{key:"createGraphicalContainer",value:function(){for(var e=h+1,t=f+1,r=0;r<=e;r++)for(var n=0;n<=t;n++)if(0===r||r===e||0===n||n===t){var o=new y(this.res["score-border"].texture,u);0===r&&0===n?o.el.texture=this.res["score-corner"].texture:0===r&&n===t?(o.el.texture=this.res["score-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1):r===e&&0===n?(o.el.texture=this.res["score-corner"].texture,o.el.anchor.y=1,o.el.scale.y*=-1):r===e&&n===t?(o.el.texture=this.res["score-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1,o.el.anchor.y=1,o.el.scale.y*=-1):r===e?(o.el.angle=-90,o.el.pivot.set(u,0)):0===r?(o.el.angle=90,o.el.pivot.set(0,u)):n===t&&(o.el.anchor.x=1,o.el.scale.x*=-1),o.el.position.x=n*u,o.el.position.y=r*u,this.addChild(o.el)}else{var i=new y(this.res["block-empty"].texture,u);i.el.position.x=n*u,i.el.position.y=r*u,this.addChild(i.el)}}},{key:"addTitle",value:function(){var e=new PIXI.Text(this.title,{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.position.x=u+this.padding,e.position.y=u+this.padding,this.addChild(e)}},{key:"addScore",value:function(){var e=new PIXI.Text("".concat(this.score),{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.anchor.set(1,0),e.position.x=u*f+u-this.padding,e.position.y=2*u+this.padding,this.scoreEl=e,this.addChild(e)}},{key:"calculate",value:function(e,t){var r=e+1;t>0&&(this.score=this.score+this.points[t]*r,this.scoreEl.text=this.score)}}])&&o(r.prototype,n),l&&o(r,l),v}();e.exports=b},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r(0),u=l.BLOCK_SIZE,f=l.NEXT_WIDTH,h=l.NEXT_HEIGHT,p=l.FONT_SIZE,d=l.FONT_FAMILY,y=r(1),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(v,PIXI.Container);var t,r,n,l,b=(t=v,function(){var e,r=c(t);if(s()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function v(e){var t,r=e.resources;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=b.call(this)).res=r,t.title="NEXT",t.padding=5,t.titleEl=null,t.tetromino=null,t.createGraphicalContainer(),t.addTitle(),t}return r=v,(n=[{key:"createGraphicalContainer",value:function(){for(var e=h+1,t=f+1,r=0;r<=e;r++)for(var n=0;n<=t;n++)if(0===r||r===e||0===n||n===t){var o=new y(this.res["score-border"].texture,u);0===r&&0===n?o.el.texture=this.res["board-corner"].texture:0===r&&n===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1):r===e&&0===n?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.y=1,o.el.scale.y*=-1):r===e&&n===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1,o.el.anchor.y=1,o.el.scale.y*=-1):r===e?(o.el.angle=-90,o.el.pivot.set(u,0)):0===r?(o.el.angle=90,o.el.pivot.set(0,u)):n===t&&(o.el.anchor.x=1,o.el.scale.x*=-1),o.el.position.x=n*u,o.el.position.y=r*u,this.addChild(o.el)}else{var i=new y(this.res["block-empty"].texture,u);i.el.position.x=n*u,i.el.position.y=r*u,this.addChild(i.el)}}},{key:"addTitle",value:function(){var e=new PIXI.Text(this.title,{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.position.x=u*(f-2)-e.width/2,e.position.y=u+this.padding,this.titleEl=e,this.addChild(e)}},{key:"addTetromino",value:function(e){this.tetromino&&this.removeChild(this.tetromino);for(var t=new PIXI.Container,r=e.shape,n=0;n<r.length;n++)for(var o=0;o<r[n].length;o++){var i=void 0;r[n][o]&&((i=new y(this.res[e.type.texture].texture,u)).el.position.x=o*u,i.el.position.y=n*u,t.addChild(i.el))}t.position.x=u*(f-2)-t.width/2,t.position.y=u*(h-2)-t.height/2+this.titleEl.height+this.padding,this.tetromino=t,this.addChild(this.tetromino)}}])&&o(r.prototype,n),l&&o(r,l),v}();e.exports=b},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r(0),u=l.BLOCK_SIZE,f=l.LEVEL_WIDTH,h=l.LEVEL_HEIGHT,p=l.FONT_SIZE,d=l.FONT_FAMILY,y=r(1),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(v,PIXI.Container);var t,r,n,l,b=(t=v,function(){var e,r=c(t);if(s()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function v(e){var t,r=e.resources;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=b.call(this)).res=r,t.title="LEVEL",t.number=0,t.padding=5,t.levelEl=null,t.createGraphicalContainer(),t.addTitle(),t.addLevel(),t}return r=v,(n=[{key:"createGraphicalContainer",value:function(){for(var e=h+1,t=f+1,r=0;r<=e;r++)for(var n=0;n<=t;n++)if(0===r||r===e||0===n||n===t){var o=new y(this.res["score-border"].texture,u);0===r&&0===n?o.el.texture=this.res["board-corner"].texture:0===r&&n===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1):r===e&&0===n?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.y=1,o.el.scale.y*=-1):r===e&&n===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1,o.el.anchor.y=1,o.el.scale.y*=-1):r===e?(o.el.angle=-90,o.el.pivot.set(u,0)):0===r?(o.el.angle=90,o.el.pivot.set(0,u)):n===t&&(o.el.anchor.x=1,o.el.scale.x*=-1),o.el.position.x=n*u,o.el.position.y=r*u,this.addChild(o.el)}else{var i=new y(this.res["block-empty"].texture,u);i.el.position.x=n*u,i.el.position.y=r*u,this.addChild(i.el)}}},{key:"addTitle",value:function(){var e=new PIXI.Text(this.title,{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.position.x=u+this.padding,e.position.y=u+this.padding,this.addChild(e)}},{key:"addLevel",value:function(){var e=new PIXI.Text("".concat(this.number),{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.anchor.set(1,0),e.position.x=u*f+u-this.padding,e.position.y=2*u+this.padding,this.levelEl=e,this.addChild(e)}},{key:"increase",value:function(){this.number=this.number+1,this.levelEl.text=this.number}}])&&o(r.prototype,n),l&&o(r,l),v}();e.exports=b},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r(0),u=l.BLOCK_SIZE,f=l.LINES_WIDTH,h=l.LINES_HEIGHT,p=l.FONT_SIZE,d=l.FONT_FAMILY,y=r(1),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(v,PIXI.Container);var t,r,n,l,b=(t=v,function(){var e,r=c(t);if(s()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function v(e){var t,r=e.resources;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=b.call(this)).res=r,t.title="LINES",t.number=0,t.padding=5,t.el=null,t.createGraphicalContainer(),t.addTitle(),t.addLines(),t}return r=v,(n=[{key:"createGraphicalContainer",value:function(){for(var e=h+1,t=f+1,r=0;r<=e;r++)for(var n=0;n<=t;n++)if(0===r||r===e||0===n||n===t){var o=new y(this.res["score-border"].texture,u);0===r&&0===n?o.el.texture=this.res["board-corner"].texture:0===r&&n===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1):r===e&&0===n?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.y=1,o.el.scale.y*=-1):r===e&&n===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1,o.el.anchor.y=1,o.el.scale.y*=-1):r===e?(o.el.angle=-90,o.el.pivot.set(u,0)):0===r?(o.el.angle=90,o.el.pivot.set(0,u)):n===t&&(o.el.anchor.x=1,o.el.scale.x*=-1),o.el.position.x=n*u,o.el.position.y=r*u,this.addChild(o.el)}else{var i=new y(this.res["block-empty"].texture,u);i.el.position.x=n*u,i.el.position.y=r*u,this.addChild(i.el)}}},{key:"addTitle",value:function(){var e=new PIXI.Text(this.title,{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.position.x=u+this.padding,e.position.y=u+this.padding,this.addChild(e)}},{key:"addLines",value:function(){var e=new PIXI.Text("".concat(this.number),{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.anchor.set(1,0),e.position.x=u*f+u-this.padding,e.position.y=u+this.padding,this.el=e,this.addChild(e)}},{key:"increase",value:function(e){this.number=this.number+e,this.el.text=this.number}}])&&o(r.prototype,n),l&&o(r,l),v}();e.exports=b}]);