!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports={FONT_FAMILY:"Press Start 2P",FONT_SIZE:22,BLOCK_SIZE:32,BOARD_HEIGHT:20,BOARD_WIDTH:10,SCORE_HEIGHT:2,SCORE_WIDTH:6,LEVEL_HEIGHT:2,LEVEL_WIDTH:6,LINES_HEIGHT:1,LINES_WIDTH:10,NEXT_HEIGHT:5,NEXT_WIDTH:6,INSTRUCTIONS_HEIGHT:8,INSTRUCTIONS_WIDTH:8}},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(0).BLOCK_SIZE,a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;r(this,e),this.el=this.draw(t,n)}var t,n,a;return t=e,(n=[{key:"draw",value:function(e,t){var n=new PIXI.Sprite(e);return n.position.x=0,n.position.y=0,n.width=t,n.height=t,n}}])&&o(t.prototype,n),a&&o(t,a),e}();e.exports=a},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(0).BOARD_WIDTH,i=n(10),a=n(11).randomBetween,s=function(){function e(t){var n=t.row,r=t.col,i=t.type,a=t.rotation;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currRotation=void 0!==a?a:0,this.realRotation=this.currRotation,this.type=i||this.getRandomType(),this.shape=this.type.shapes[this.currRotation],this.row=void 0!==n?n:0,this.col=void 0!==r?r:Math.ceil((o-1)/2-this.type.size/2)}var t,n,s;return t=e,(n=[{key:"getRandomType",value:function(){var e=a(1,Object.keys(i).length)-1;return i[Object.keys(i)[e]]}},{key:"move",value:function(e){this.col=this.col+e}},{key:"fall",value:function(){this.row++}},{key:"nextRotation",value:function(e){return Math.abs(this.realRotation+e)%4}},{key:"rotate",value:function(e){this.realRotation=this.realRotation+e;var t=Math.abs(this.realRotation)%4;this.currRotation=t,this.shape=this.type.shapes[this.currRotation]}}])&&r(t.prototype,n),s&&r(t,s),e}();e.exports=s},function(e,t,n){n(4);var r=n(5);window.onload=function(){var e=new PIXI.Application({width:1024,height:864,backgroundColor:0,resolution:1});e.loader.add("background","images/screen/background.png"),e.loader.add("board-border","images/screen/board-border.png"),e.loader.add("board-corner","images/screen/board-corner.png"),e.loader.add("score-border","images/screen/score-border.png"),e.loader.add("score-corner","images/screen/score-corner.png"),e.loader.add("block-empty","images/empty.png"),e.loader.add("block-i","images/I.png"),e.loader.add("block-j","images/J.png"),e.loader.add("block-l","images/L.png"),e.loader.add("block-o","images/O.png"),e.loader.add("block-s","images/S.png"),e.loader.add("block-t","images/T.png"),e.loader.add("block-z","images/Z.png"),document.getElementById("game").appendChild(e.view),e.loader.onComplete.add((function(){new r(e).run()})),e.loader.load()}},function(e,t,n){},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(6),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.gameStates={},this.state=null}var t,n,i;return t=e,(n=[{key:"run",value:function(){this.addState("play",new o(this.app)),this.setState("play"),this.app.ticker.add(this.update,this)}},{key:"addState",value:function(e,t){this.gameStates[e]=t,this.app.stage.addChild(t)}},{key:"update",value:function(){this.state&&this.state.update()}},{key:"setState",value:function(e,t){var n=this.state;this.state=null,n&&(t.keepVisible||(n.visible=!1),n.exit(t));var r=this.gameStates[e];r.enter(t),r.visible=!0,this.state=r}}])&&r(t.prototype,n),i&&r(t,i),e}();e.exports=i},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(0),u=l.BLOCK_SIZE,f=l.LINES_HEIGHT,h=l.SCORE_HEIGHT,p=l.INSTRUCTIONS_WIDTH,d=n(7),y=n(8),b=n(9),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(v,e);var t,n,r,l,d=(t=v,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return a(this,e)});function v(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=d.call(this)).engine=new b({resources:e.loader.resources}),t.startDate=null;var n=new PIXI.TilingSprite(e.loader.resources.background.texture,e.renderer.width,e.renderer.height);return t.addChild(n),t.addChild(t.engine.lines),t.addChild(t.engine.board),t.addChild(t.engine.score),t.addChild(t.engine.next),t.addChild(t.engine.level),t.addChild(t.engine.instructions),t.engine.instructions.position.x=u,t.engine.instructions.position.y=4*u,t.engine.lines.position.x=3*u+u*p,t.engine.lines.position.y=u,t.engine.board.position.x=3*u+u*p,t.engine.board.position.y=t.engine.lines.position.y+u*f+2*u,t.engine.score.position.x=15*u+u*p,t.engine.score.position.y=u,t.engine.next.position.x=15*u+u*p,t.engine.next.position.y=t.engine.score.position.y+u*h+2*u,t.engine.level.position.x=15*u+u*p,t.engine.level.position.y=t.engine.score.position.y+t.engine.next.position.y+u*h+4*u,t}return n=v,(r=[{key:"enter",value:function(){this.startDate=new Date}},{key:"update",value:function(){if(!this.engine.gameOver){var e=new Date,t=y.getKeyPress();t===y.KEYS.KEY_UP&&this.engine.rotate(-1),t===y.KEYS.KEY_DOWN&&this.engine.rotate(1),t===y.KEYS.KEY_LEFT&&this.engine.move(-1),t===y.KEYS.KEY_RIGHT&&this.engine.move(1),e-this.startDate>=this.engine.hardFallDelaySpeed&&t===y.KEYS.KEY_SPACE?(this.startDate=new Date,this.engine.fall()&&y.unblockSpace()):e-this.startDate>=this.engine.gameSpeed&&(this.startDate=new Date,this.engine.fall())}this.engine.update()}}])&&o(n.prototype,r),l&&o(n,l),v}(d);e.exports=v},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,PIXI.Container);var t,n,c,l,u=(t=f,function(){var e,n=s(t);if(a()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=u.call(this)).visible=!1,e}return n=f,(c=[{key:"enter",value:function(e){}},{key:"exit",value:function(e){}}])&&r(n.prototype,c),l&&r(n,l),f}();e.exports=c},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r={KEY_DOWN:40,KEY_UP:38,KEY_LEFT:37,KEY_RIGHT:39,KEY_SPACE:32},o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=null,this.blockSpace=!1,this.addEvents()}var t,o,i;return t=e,(o=[{key:"addEvents",value:function(){var e=this;return window.addEventListener("keydown",(function(t){null===e.key&&(t.keyCode!==r.KEY_SPACE?e.key=t.keyCode:e.blockSpace||(e.key=t.keyCode))})),window.addEventListener("keyup",(function(t){e.key=null,t.keyCode===r.KEY_SPACE&&(e.blockSpace=!1)})),this}},{key:"getKeyPress",value:function(){var e=this.key;return e!==r.KEY_SPACE&&(this.key=null),e}},{key:"unblockSpace",value:function(){this.key=null,this.blockSpace=!0}}])&&n(t.prototype,o),i&&n(t,i),e}();e.exports=new o,e.exports.KEYS=r},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(0),i=o.BOARD_HEIGHT,a=o.BOARD_WIDTH,s=n(2),c=n(12),l=n(13),u=n(14),f=n(15),h=n(16),p=n(17),d=function(){function e(t){var n=t.board,r=t.resources;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.board=n||new c({resources:r}),this.score=new l({resources:r}),this.next=new u({resources:r}),this.level=new f({resources:r}),this.lines=new h({resources:r}),this.instructions=new p({resources:r}),this.gameOver=!1,this.gameOverStartDate=new Date,this.gameOverDelaySpeed=50,this.gameOverAnimationActive=!0,this.gameSpeed=1e3,this.hardFallDelaySpeed=50,this.MOVEMENT_TYPES={ROTATE:"ROTATE",RIGHT:"RIGHT",LEFT:"LEFT",DOWN:"DOWN"},this.currTetromino=new s({}),this.tetrominos=[];for(var o=0;o<5;o++)this.tetrominos.push(new s({}));this.board.spawn(this.currTetromino),this.next.addTetromino(this.tetrominos[0])}var t,n,o;return t=e,(n=[{key:"canMove",value:function(e,t){var n=e.shape,r=e.row,o=e.row+(n.length-1),s=e.col,c=e.col+(n.length-1);t===this.MOVEMENT_TYPES.DOWN&&(r+=1,o+=1),t===this.MOVEMENT_TYPES.LEFT&&(s-=1,c-=1),t===this.MOVEMENT_TYPES.RIGHT&&(s+=1,c+=1),t===this.MOVEMENT_TYPES.ROTATE&&(n=e.type.shapes[e.nextRotation(1)]);for(var l=!0,u=0,f=r;f<=o;f++){for(var h=0,p=s;p<=c;p++){if(f<=i-1)if(p>=0&&p<=a-1){if(this.board.grid[f][p]&&n[u][h]){l=!1;break}}else n[u][h]&&(l=!1);else n[u][h]&&(l=!1);h++}if(!l)break;u++}return l}},{key:"fall",value:function(){var e=!1;return this.currTetromino&&this.canMove(this.currTetromino,"DOWN")?this.currTetromino.fall():(this.fusion(),e=!0),e}},{key:"move",value:function(e){this.currTetromino&&(-1===e?this.canMove(this.currTetromino,"LEFT")&&this.currTetromino.move(e):this.canMove(this.currTetromino,"RIGHT")&&this.currTetromino.move(e))}},{key:"rotate",value:function(e){this.canMove(this.currTetromino,"ROTATE")&&this.currTetromino.rotate(e)}},{key:"fusion",value:function(){this.board.merge(this.currTetromino);var e=this.tetrominos.splice(0,1);this.tetrominos.push(new s({})),this.currTetromino=e[0];var t=this.checkForLines();this.score.calculate(this.level.number,t),this.lines.increase(t),0!==t&&this.lines.number%10==0&&(this.level.increase(),this.gameSpeed=this.gameSpeed-50),this.board.spawn(this.currTetromino),this.next.addTetromino(this.tetrominos[0]),this.canMove(this.currTetromino)||(this.gameOver=!0,console.log("GAME OVER"))}},{key:"checkForLines",value:function(){for(var e=[],t=0;t<this.board.grid.length;t++){for(var n=!0,r=0;r<this.board.grid[t].length;r++)this.board.grid[t][r]||(n=!1);n&&e.push(t)}for(var o=this.board.grid.slice(),i=0;i<e.length;i++)o.splice(e[i]-i,1);for(var s=0;s<e.length;s++)o.unshift(new Array(a).fill(0));return this.board.grid=o,e.length}},{key:"update",value:function(){if(this.gameOver){if(this.gameOverAnimationActive&&new Date-this.gameOverStartDate>=this.gameOverDelaySpeed){var e=this.board.completeEmptyRowWithRandomBlocks();this.gameOverStartDate=new Date,0===e&&(this.gameOverAnimationActive=!1)}}else this.board.update(this.currTetromino)}}])&&r(t.prototype,n),o&&r(t,o),e}();e.exports=d},function(e,t){e.exports={I:{name:"I",texture:"block-i",size:4,shapes:[[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]]},J:{name:"J",texture:"block-j",size:3,shapes:[[[1,0,0],[1,1,1],[0,0,0]],[[0,1,1],[0,1,0],[0,1,0]],[[0,0,0],[1,1,1],[0,0,1]],[[0,1,0],[0,1,0],[1,1,0]]]},L:{name:"L",texture:"block-l",size:3,shapes:[[[0,0,1],[1,1,1],[0,0,0]],[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]]]},O:{name:"O",texture:"block-o",size:2,shapes:[[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]],[[1,1],[1,1]]]},S:{name:"S",texture:"block-s",size:3,shapes:[[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]],[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]]},T:{name:"T",texture:"block-t",size:3,shapes:[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]]},Z:{name:"Z",texture:"block-z",size:3,shapes:[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]],[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]]}}},function(e,t){e.exports={randomBetween:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(0),u=l.BLOCK_SIZE,f=l.BOARD_WIDTH,h=l.BOARD_HEIGHT,p=n(2),d=n(1),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(b,PIXI.Container);var t,n,r,l,y=(t=b,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return a(this,e)});function b(e){var t,n=e.resources;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=y.call(this)).res=n,t.grid=t.createEmptyBoard(),t.visibleGrid=t.createEmptyBoard(),t.createGraphicalContainer(),t.board=new PIXI.Container,t.board.position.x=32,t.board.position.y=32,t.init(),t}return n=b,(r=[{key:"createGraphicalContainer",value:function(){for(var e=h+1,t=f+1,n=0;n<=e;n++)for(var r=0;r<=t;r++)if(0===n||n===e||0===r||r===t){var o=new d(this.res["board-border"].texture,u);0===n&&0===r?o.el.texture=this.res["board-corner"].texture:0===n&&r===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1):n===e&&0===r?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.y=1,o.el.scale.y*=-1):n===e&&r===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1,o.el.anchor.y=1,o.el.scale.y*=-1):n===e?(o.el.anchor.y=1,o.el.scale.y*=-1):0===r?(o.el.angle=-90,o.el.pivot.set(u,0)):r===t&&(o.el.angle=90,o.el.pivot.set(0,u)),o.el.position.x=r*u,o.el.position.y=n*u,this.addChild(o.el)}}},{key:"createEmptyBoard",value:function(){return new Array(h).fill(0).map((function(){return new Array(f).fill(0)}))}},{key:"init",value:function(){for(var e=0;e<this.grid.length;e++)for(var t=0;t<this.grid[e].length;t++){var n=new d(this.res["block-empty"].texture,u);n.el.position.x=t*u,n.el.position.y=e*u,this.visibleGrid[e][t]=n.el,this.board.addChild(n.el)}this.addChild(this.board)}},{key:"spawn",value:function(e){this.update(e)}},{key:"merge",value:function(e){this.grid=this.getGridWithTetromino(e)}},{key:"update",value:function(e){this.draw(this.getGridWithTetromino(e))}},{key:"getGridWithTetromino",value:function(e){for(var t=this.createEmptyBoard(),n=0,r=0;r<this.grid.length;r++){for(var o=e.col<0?Math.abs(e.col):0,i=!1,a=0;a<this.grid[r].length;a++)r>=e.row&&r<e.row+e.type.size&&a>=e.col&&a<e.col+e.type.size?(e.type.shapes[e.currRotation][n][o]?t[r][a]=e.type.texture:t[r][a]=this.grid[r][a],i=!0):t[r][a]=this.grid[r][a],i&&o++;i&&n++}return t}},{key:"draw",value:function(e){for(var t=0;t<this.grid.length;t++)for(var n=0;n<this.grid[t].length;n++)0!==e[t][n]?this.visibleGrid[t][n].texture=this.res[e[t][n]].texture:this.visibleGrid[t][n].texture=this.grid[t][n]?this.visibleGrid[t][n].texture:this.res["block-empty"].texture}},{key:"completeEmptyRowWithRandomBlocks",value:function(){for(var e=this.grid.length-1,t=e;t>=0;t--){for(var n=!0,r=0;r<this.grid[t].length;r++)0===this.grid[t][r]&&(n=!1);if(!n){for(var o=0;o<this.grid[t].length;o++){var i=new p({});this.visibleGrid[t][o].texture=this.res[i.type.texture].texture,this.grid[t][o]=i.type.texture,e=t}break}}return e}}])&&o(n.prototype,r),l&&o(n,l),b}();e.exports=y},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(0),u=l.BLOCK_SIZE,f=l.SCORE_WIDTH,h=l.SCORE_HEIGHT,p=l.FONT_SIZE,d=l.FONT_FAMILY,y=n(1),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(v,PIXI.Container);var t,n,r,l,b=(t=v,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return a(this,e)});function v(e){var t,n=e.resources;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=b.call(this)).res=n,t.title="SCORE",t.score=0,t.maxScore=999999999,t.padding=5,t.points={1:40,2:100,3:300,4:1200},t.scoreEl=null,t.createGraphicalContainer(),t.addTitle(),t.addScore(),t}return n=v,(r=[{key:"createGraphicalContainer",value:function(){for(var e=h+1,t=f+1,n=0;n<=e;n++)for(var r=0;r<=t;r++)if(0===n||n===e||0===r||r===t){var o=new y(this.res["score-border"].texture,u);0===n&&0===r?o.el.texture=this.res["score-corner"].texture:0===n&&r===t?(o.el.texture=this.res["score-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1):n===e&&0===r?(o.el.texture=this.res["score-corner"].texture,o.el.anchor.y=1,o.el.scale.y*=-1):n===e&&r===t?(o.el.texture=this.res["score-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1,o.el.anchor.y=1,o.el.scale.y*=-1):n===e?(o.el.angle=-90,o.el.pivot.set(u,0)):0===n?(o.el.angle=90,o.el.pivot.set(0,u)):r===t&&(o.el.anchor.x=1,o.el.scale.x*=-1),o.el.position.x=r*u,o.el.position.y=n*u,this.addChild(o.el)}else{var i=new y(this.res["block-empty"].texture,u);i.el.position.x=r*u,i.el.position.y=n*u,this.addChild(i.el)}}},{key:"addTitle",value:function(){var e=new PIXI.Text(this.title,{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.position.x=u+this.padding,e.position.y=u+this.padding,this.addChild(e)}},{key:"addScore",value:function(){var e=new PIXI.Text("".concat(this.score),{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.anchor.set(1,0),e.position.x=u*f+u-this.padding,e.position.y=2*u+this.padding,this.scoreEl=e,this.addChild(e)}},{key:"calculate",value:function(e,t){var n=e+1;t>0&&(this.score=this.score+this.points[t]*n,this.scoreEl.text=this.score)}}])&&o(n.prototype,r),l&&o(n,l),v}();e.exports=b},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(0),u=l.BLOCK_SIZE,f=l.NEXT_WIDTH,h=l.NEXT_HEIGHT,p=l.FONT_SIZE,d=l.FONT_FAMILY,y=n(1),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(v,PIXI.Container);var t,n,r,l,b=(t=v,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return a(this,e)});function v(e){var t,n=e.resources;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=b.call(this)).res=n,t.title="NEXT",t.padding=5,t.titleEl=null,t.tetromino=null,t.createGraphicalContainer(),t.addTitle(),t}return n=v,(r=[{key:"createGraphicalContainer",value:function(){for(var e=h+1,t=f+1,n=0;n<=e;n++)for(var r=0;r<=t;r++)if(0===n||n===e||0===r||r===t){var o=new y(this.res["score-border"].texture,u);0===n&&0===r?o.el.texture=this.res["board-corner"].texture:0===n&&r===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1):n===e&&0===r?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.y=1,o.el.scale.y*=-1):n===e&&r===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1,o.el.anchor.y=1,o.el.scale.y*=-1):n===e?(o.el.angle=-90,o.el.pivot.set(u,0)):0===n?(o.el.angle=90,o.el.pivot.set(0,u)):r===t&&(o.el.anchor.x=1,o.el.scale.x*=-1),o.el.position.x=r*u,o.el.position.y=n*u,this.addChild(o.el)}else{var i=new y(this.res["block-empty"].texture,u);i.el.position.x=r*u,i.el.position.y=n*u,this.addChild(i.el)}}},{key:"addTitle",value:function(){var e=new PIXI.Text(this.title,{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.position.x=u*(f-2)-e.width/2,e.position.y=u+this.padding,this.titleEl=e,this.addChild(e)}},{key:"addTetromino",value:function(e){this.tetromino&&this.removeChild(this.tetromino);for(var t=new PIXI.Container,n=e.shape,r=0;r<n.length;r++)for(var o=0;o<n[r].length;o++){var i=void 0;n[r][o]&&((i=new y(this.res[e.type.texture].texture,u)).el.position.x=o*u,i.el.position.y=r*u,t.addChild(i.el))}t.position.x=u*(f-2)-t.width/2,t.position.y=u*(h-2)-t.height/2+this.titleEl.height+this.padding,this.tetromino=t,this.addChild(this.tetromino)}}])&&o(n.prototype,r),l&&o(n,l),v}();e.exports=b},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(0),u=l.BLOCK_SIZE,f=l.LEVEL_WIDTH,h=l.LEVEL_HEIGHT,p=l.FONT_SIZE,d=l.FONT_FAMILY,y=n(1),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(v,PIXI.Container);var t,n,r,l,b=(t=v,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return a(this,e)});function v(e){var t,n=e.resources;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=b.call(this)).res=n,t.title="LEVEL",t.number=0,t.padding=5,t.levelEl=null,t.createGraphicalContainer(),t.addTitle(),t.addLevel(),t}return n=v,(r=[{key:"createGraphicalContainer",value:function(){for(var e=h+1,t=f+1,n=0;n<=e;n++)for(var r=0;r<=t;r++)if(0===n||n===e||0===r||r===t){var o=new y(this.res["score-border"].texture,u);0===n&&0===r?o.el.texture=this.res["board-corner"].texture:0===n&&r===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1):n===e&&0===r?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.y=1,o.el.scale.y*=-1):n===e&&r===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1,o.el.anchor.y=1,o.el.scale.y*=-1):n===e?(o.el.angle=-90,o.el.pivot.set(u,0)):0===n?(o.el.angle=90,o.el.pivot.set(0,u)):r===t&&(o.el.anchor.x=1,o.el.scale.x*=-1),o.el.position.x=r*u,o.el.position.y=n*u,this.addChild(o.el)}else{var i=new y(this.res["block-empty"].texture,u);i.el.position.x=r*u,i.el.position.y=n*u,this.addChild(i.el)}}},{key:"addTitle",value:function(){var e=new PIXI.Text(this.title,{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.position.x=u+this.padding,e.position.y=u+this.padding,this.addChild(e)}},{key:"addLevel",value:function(){var e=new PIXI.Text("".concat(this.number),{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.anchor.set(1,0),e.position.x=u*f+u-this.padding,e.position.y=2*u+this.padding,this.levelEl=e,this.addChild(e)}},{key:"increase",value:function(){this.number=this.number+1,this.levelEl.text=this.number}}])&&o(n.prototype,r),l&&o(n,l),v}();e.exports=b},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(0),u=l.BLOCK_SIZE,f=l.LINES_WIDTH,h=l.LINES_HEIGHT,p=l.FONT_SIZE,d=l.FONT_FAMILY,y=n(1),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(v,PIXI.Container);var t,n,r,l,b=(t=v,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return a(this,e)});function v(e){var t,n=e.resources;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=b.call(this)).res=n,t.title="LINES",t.number=0,t.padding=5,t.el=null,t.createGraphicalContainer(),t.addTitle(),t.addLines(),t}return n=v,(r=[{key:"createGraphicalContainer",value:function(){for(var e=h+1,t=f+1,n=0;n<=e;n++)for(var r=0;r<=t;r++)if(0===n||n===e||0===r||r===t){var o=new y(this.res["score-border"].texture,u);0===n&&0===r?o.el.texture=this.res["board-corner"].texture:0===n&&r===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1):n===e&&0===r?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.y=1,o.el.scale.y*=-1):n===e&&r===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1,o.el.anchor.y=1,o.el.scale.y*=-1):n===e?(o.el.angle=-90,o.el.pivot.set(u,0)):0===n?(o.el.angle=90,o.el.pivot.set(0,u)):r===t&&(o.el.anchor.x=1,o.el.scale.x*=-1),o.el.position.x=r*u,o.el.position.y=n*u,this.addChild(o.el)}else{var i=new y(this.res["block-empty"].texture,u);i.el.position.x=r*u,i.el.position.y=n*u,this.addChild(i.el)}}},{key:"addTitle",value:function(){var e=new PIXI.Text(this.title,{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.position.x=u+this.padding,e.position.y=u+this.padding,this.addChild(e)}},{key:"addLines",value:function(){var e=new PIXI.Text("".concat(this.number),{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.anchor.set(1,0),e.position.x=u*f+u-this.padding,e.position.y=u+this.padding,this.el=e,this.addChild(e)}},{key:"increase",value:function(e){this.number=this.number+e,this.el.text=this.number}}])&&o(n.prototype,r),l&&o(n,l),v}();e.exports=b},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=n(0),u=l.BLOCK_SIZE,f=l.INSTRUCTIONS_WIDTH,h=l.INSTRUCTIONS_HEIGHT,p=l.FONT_SIZE,d=l.FONT_FAMILY,y=n(1),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(v,PIXI.Container);var t,n,r,l,b=(t=v,function(){var e,n=c(t);if(s()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return a(this,e)});function v(e){var t,n=e.resources;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=b.call(this)).res=n,t.padding=5,t.createGraphicalContainer(),t.addInstructions(),t}return n=v,(r=[{key:"createGraphicalContainer",value:function(){for(var e=h+1,t=f+1,n=0;n<=e;n++)for(var r=0;r<=t;r++)if(0===n||n===e||0===r||r===t){var o=new y(this.res["score-border"].texture,u);0===n&&0===r?o.el.texture=this.res["board-corner"].texture:0===n&&r===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1):n===e&&0===r?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.y=1,o.el.scale.y*=-1):n===e&&r===t?(o.el.texture=this.res["board-corner"].texture,o.el.anchor.x=1,o.el.scale.x*=-1,o.el.anchor.y=1,o.el.scale.y*=-1):n===e?(o.el.angle=-90,o.el.pivot.set(u,0)):0===n?(o.el.angle=90,o.el.pivot.set(0,u)):r===t&&(o.el.anchor.x=1,o.el.scale.x*=-1),o.el.position.x=r*u,o.el.position.y=n*u,this.addChild(o.el)}else{var i=new y(this.res["block-empty"].texture,u);i.el.position.x=r*u,i.el.position.y=n*u,this.addChild(i.el)}}},{key:"addInstructions",value:function(){var e=new PIXI.Text("KEYS",{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});e.position.x=u*(f-3)-e.width/2,e.position.y=u+this.padding;var t=new PIXI.Text("UP/DOWN",{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});t.position.x=u+this.padding,t.position.y=e.position.y+e.height+4*this.padding;var n=new PIXI.Text("ROTATE",{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});n.anchor.set(1,0),n.position.x=u*f+u-this.padding,n.position.y=t.position.y+t.height+this.padding;var r=new PIXI.Text("LEFT/RIGHT",{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});r.position.x=u+this.padding,r.position.y=n.position.y+n.height+4*this.padding;var o=new PIXI.Text("MOVE",{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});o.anchor.set(1,0),o.position.x=u*f+u-this.padding,o.position.y=r.position.y+r.height+this.padding;var i=new PIXI.Text("SPACE",{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});i.position.x=u+this.padding,i.position.y=o.position.y+o.height+4*this.padding;var a=new PIXI.Text("FALL",{fontFamily:d,fontSize:"".concat(p,"px"),align:"right",fill:"#ffffff"});a.anchor.set(1,0),a.position.x=u*f+u-this.padding,a.position.y=i.position.y+i.height+this.padding,this.addChild(e),this.addChild(t),this.addChild(n),this.addChild(r),this.addChild(o),this.addChild(i),this.addChild(a)}}])&&o(n.prototype,r),l&&o(n,l),v}();e.exports=b}]);